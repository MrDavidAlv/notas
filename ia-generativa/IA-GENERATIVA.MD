
<div align="center">

# RESUMEN GENERAL SOBRE IA GENERATIVA 

<img src="./imagenes/portada.png" width="20%">

</div>

> üìñ Basado en el libro *IA Generativa en AWS* de Marbombo, autores: Chris, Antje y Shelbee.

## 1. CASOS DE USO DE LA IA GENERATIVA Y CICLO DE VIDA DEL PROYECTO

### Servicios AWS para IA 
- Bedrock
- SageMarker
- CodeWhispperer
- Trainium
- Inferentia

### Casos de uso
- Resumen texto
- Reescritura
- Extracci√≥n de informaci√≥n
- Respuesta a preguntas
- Detecci√≥n de contenido t√≥xico o da√±ino
- Clasificaci√≥n y moderaci√≥n de contenido
- Interfaz conversacional
- Traducci√≥n 
- Generaci√≥n de c√≥digo fuente
- Razonamiento sobre un bosquejo dibujado a mano
- Enmascarar informaci√≥n personal identificable(PII)
- Marketing personalizado y anuncios

### Modelos b√°sicos y centros de modelos
- Modelos de redes neuronales grandes y complejos (con cantidades enormes de par√°metros).
    > üìå **NOTA:**  Los par√°metros aprenden en una etapa de aprendizaje llamada *preformaci√≥n*, donde se utilizan grandes cantidades de datos distribuidos en CPU y GPU con lo cual al final estos pueden representar entidades complejas como el lenguaje humano, im√°genes, v√≠deos y fragmentos de audio. 

### Fuentes de modelos de IA
- Hugging Face Model Hub
- Pythorch Hub
- Amazoz SageMaker JumpStart

### Ciclo de vida del proyecto de IA generativa
No existe un ciclo de vida definitivo para un proyecto de IA generativa, pero esto podr√≠a concentrar las etapas m√°s importantes de un ciclo de proyecto IA.

<div align="center">
    <img src="./imagenes/ciclo-vida-proyecto-IA.png" width="70%">
</div>




- **Identifique caso de uso**
    Aqu√≠ se define el caso de uso, alcance y tarea espec√≠fica con el fin de tener claro los objetivos, comprender el potencial y las limitaciones. 
- **Experimente y seleccione** 
    Se utilizan t√©cnicas de *ingenier√≠a de indicaciones* y *aprendizaje de contexto*. Inicie con un modelo b√°sico existente y ajuste seg√∫n la necesidad de la aplicaci√≥n. Eval√∫e tama√±o y recursos, probando distintas opciones en entornos como Amazon SageMaker, Hugging Face u otros para iterar r√°pido antes de escalar.
- **Adapte alinee y mejore** 
    Personalice el modelo al dominio espec√≠fico y caso de uso, afinando datos y par√°metros. Use t√©cnicas como RLHF para alinearlo con valores y preferencias humanas, y complem√©ntelo con fuentes externas o APIs.
- **Eval√∫e** 
    Defina m√©tricas claras para medir mejoras y alineaci√≥n con metas empresariales. La evaluaci√≥n continua durante la adaptaci√≥n asegura que el modelo evolucione en la direcci√≥n correcta.
- **Instale e integre** 
    Implemente el modelo optimizando la inferencia y reduciendo latencia para mejorar la experiencia del usuario. Utilice instancias de AWS optimizadas para cargas generativas y puntos de conexi√≥n flexibles.
- **Monitoree**  
    Configure m√©tricas y alertas con servicios como Amazon CloudWatch y CloudTrail para supervisar rendimiento y seguridad. Mantenga un control constante para ajustar y optimizar en producci√≥n.

![Ciclo de vida](/imagenes/ciclo-vida.png)

### ¬øPor qu√© IA generativa en la nube?

- **Mayor flexibilidad y elecci√≥n**
    La nube ofrece la posibilidad de acceder a una amplia gama de servicios, modelos y herramientas para ajustarse a diferentes necesidades y casos de uso. Permite elegir el modelo adecuado para un proyecto y cambiarlo cuando sea necesario, aprovechando de forma continua las mejoras y nuevos modelos que aparecen.
- **Funciones de seguridad y gesti√≥n de nivel empresarial**
    Los proveedores de nube suelen integrar medidas avanzadas de seguridad y gesti√≥n para proteger datos, redes y accesos. Esto incluye cifrado, aislamiento de entornos, autenticaci√≥n, autorizaci√≥n y detecci√≥n de amenazas, lo que resulta esencial en sectores con altos requerimientos regulatorios. 

- **Capacidades generativas de √∫ltima generaci√≥n**
    Las plataformas en la nube facilitan el uso de modelos generativos de c√≥digo abierto y propietario, as√≠ como herramientas para entrenamiento, ajuste fino e implementaci√≥n a gran escala. Adem√°s, los proveedores invierten en infraestructura optimizada para IA, reduciendo los tiempos y costos de desarrollo.
- **Gastos operativos reducidos**
    Gracias a la infraestructura gestionada, la nube permite usar IA generativa sin tener que invertir en hardware propio, reduciendo gastos y simplificando la administraci√≥n.
- **Un historial s√≥lido de innovaci√≥n continua**
    Las principales plataformas de nube mantienen un ritmo constante de innovaci√≥n en inteligencia artificial, lanzando mejoras y nuevos servicios que ayudan a implementar soluciones m√°s r√°pidas y eficientes.

### Creaci√≥n de aplicaciones de IA generativa

Una aplicaci√≥n de IA generativa incluye modelos generativos.

> üìå **NOTA:** Generalmente, los proveedores de la nube ofrecen herramientas que empaquetan estas arquitecturas, como lo es CodeWhisper de AWS.

**Diagrama APP general**

<div align="center">

<img src="./imagenes/AppIA.jpeg" width="70%">

</div>

**Diagrama APP ejemplo en AWS**
<div align="center">
 <img src="./imagenes/AppIAAWS.jpeg" width="70%">
</div>


## 2. INGENIER√çA DE INDICACIONES Y APRENDIZAJE EN CONTEXTO 
Incluye m√©todos de c√≥digo bajo para interactuar con modelos de IA generativa. *"Escribir indicaciones es tanto un arte como una ciencia"*.  
Aprendizaje en *contexto*: uso de pares de preguntas y respuestas.  
Ajuste de par√°metros generativos, como la temperatura y *top-k*, para controlar la creatividad del modelo.
Componentes l√©xicos(tokens) de texto.

### Indicaciones y respuestas
Generalmente, las indicaciones se dan en texto y se da una respuesta en texto. En modelos multimodales, devuelve otro tipo de respuestas: la respuesta puede contener texto, imagen, audio o video. El modelo aprender√° a optimizar las respuestas para dar el mejor resultado.   


### Componentes l√©xicos
Los modelos de IA generativa entienden las instrucciones en contexto a trav√©s de tokens, en los cuales las palabras se fragmentan y combinan de diferentes maneras, integrando diversos componentes l√©xicos.

<div align="center">
 <img src="./imagenes/token.png" width="70%">
</div>

> **Token üß©:** En el contexto de la inteligencia artificial y el procesamiento de lenguaje natural, un token es una unidad m√≠nima de texto que el modelo utiliza para procesar y generar lenguaje.
Puede ser una palabra completa, parte de una palabra, un signo de puntuaci√≥n o incluso un espacio, dependiendo del sistema de tokenizaci√≥n.
Los modelos transforman el texto en tokens para convertirlo en representaciones num√©ricas que pueden ser interpretadas y manipuladas mediante c√°lculos algebraicos y estad√≠sticos.

> üìå **Ventajas:**  Esta forma de estructurar el vocabulario permite que el modelo aprenda y comprenda el lenguaje humano durante la etapa de preentrenamiento. Adem√°s, facilita el c√°lculo de la respuesta, ya que esta es el resultado de operaciones algebraicas y estad√≠sticas.


### Ingenier√≠a de indicaciones 

Habilidad enfocada en comprender y aplicar modelos de IA generativa a tareas y casos de uso, con el objetivo de obtener el m√°ximo provecho de los modelos y sus aplicaciones.
Generalmente, se itera m√∫ltiples veces antes de obtener la respuesta final, ya que los modelos suelen generar grandes vol√∫menes de texto.
La mayor√≠a de los modelos de IA generativa han sido afinados con la ayuda de personas que etiquetan los resultados, en un proceso conocido como *aprendizaje por refuerzo*.

> **aprendizaje por refuerzo** üéØ En inteligencia artificial, el aprendizaje por refuerzo es un enfoque en el que un agente aprende a tomar decisiones mediante la interacci√≥n con un entorno, recibiendo recompensas o penalizaciones seg√∫n sus acciones.
En el caso de la IA generativa, este m√©todo se emplea para afinar modelos utilizando la retroalimentaci√≥n de personas que eval√∫an y etiquetan las salidas del modelo, ajustando as√≠ su comportamiento para alinearlo con objetivos, valores o preferencias humanas.

En una charla es importante indicar las entradas, por ejemplo, del usuario como `Usuario:`, y para las salidas del modelo utilizar `Asistente:`. Esto le da una estructura clara que facilita la interacci√≥n.

### Estructura de indicaciones

Para mejorar la calidad de la respuesta de un modelo de IA generativa, es fundamental optimizar la estructura de la indicaci√≥n.  
El modelo debe tener **clara la instrucci√≥n** y contar con **contexto suficiente** para interpretar correctamente la solicitud.

- **Instrucci√≥n:** Texto de entrada que describe de forma clara y precisa lo que se desea que el modelo realice.  
  Mientras m√°s espec√≠fica y detallada sea la instrucci√≥n, mejor ser√° la calidad de la respuesta.

- **Contexto:** Informaci√≥n adicional y detalles relevantes que ayudan al modelo a comprender mejor la solicitud.  
  Este puede incluir datos previos, ejemplos o referencias espec√≠ficas.

Adem√°s, se pueden incluir otros elementos para orientar la respuesta del modelo:

- **Tono:** Indica el estilo de comunicaci√≥n que debe utilizar el modelo (formal, informal, t√©cnico, amigable, persuasivo, etc.).

- **Restricciones:** L√≠mites o condiciones que debe respetar la respuesta, como extensi√≥n m√°xima, uso de cierto vocabulario o evitar determinados temas.

### Inferencia con cero golpes
Pido al asistente: *‚ÄúEscr√≠beme un haiku sobre la lluvia‚Äù*.  
No doy ejemplos, solo la instrucci√≥n, y espero la respuesta en el formato correcto.  

> üìå **Descripci√≥n:** El modelo responde √∫nicamente con lo aprendido en su entrenamiento, sin ejemplos adicionales.  
> Es √∫til cuando la tarea es sencilla o bien definida.  


### Inferencia con un golpe
Pido al asistente: *‚ÄúEscr√≠beme un haiku sobre la lluvia‚Äù*  
y le muestro un ejemplo de la estructura:  

> *‚ÄúViejo estanque,  
salta una rana al agua,  
ruido de agua.‚Äù*  

> üìå **Descripci√≥n:** El modelo recibe un ejemplo como referencia y lo usa para imitar la forma y el estilo esperados.  
> Es √∫til cuando se requiere un formato o tono espec√≠fico.  


### Tipos de inferencia con ejemplos

**Inferencia con un solo golpe**
Se agrega una instrucci√≥n con un ejemplo de referencia.

Indicaci√≥n:
Usuario: Responda utilizando el formato mostrado. ¬øQui√©n gan√≥ la serie mundial de b√©isbol en 2016?
Los Astros de Houston ganaron la serie mundial en 2022. Derrotaron a los Filis de Filadelfia.
¬øQui√©n gan√≥ la serie mundial de b√©isbol en 2016?

Respuesta: Los Cachorros de Chicago ganaron la serie mundial de 2016. Derrotaron a los Indios de Cleveland en siete partidos...

> üìå **NOTA:** Respuesta m√°s cercana a lo deseado, pero con demasiado detalle.

**Inferencia con pocos golpes**
Se proporcionan m√∫ltiples ejemplos para establecer un patr√≥n claro.

**Cuando el aprendizaje sale mal**
Si se proporcionan ejemplos incorrectos, el modelo aprende temporalmente informaci√≥n err√≥nea. Ejemplo: clasificar opiniones positivas como negativas y viceversa.

### Mejores pr√°cticas de aprendizaje en contexto

- **Comience con cero golpes**, luego pruebe uno o pocos golpes si es necesario
- **Proporcione ejemplos consistentes** que representen bien el conjunto de datos
- **L√≠mite: 5-6 ejemplos m√°ximo**. Si necesita m√°s, considere afinar el modelo
- **El aprendizaje en contexto var√≠a** seg√∫n el modelo utilizado

### Mejores pr√°cticas de ingenier√≠a de indicaciones

#### Estructura y claridad
- **Sea claro y conciso**: Evite ambig√ºedad. Si confunde a humanos, confundir√° al modelo
- **Ser creativo**: Indicaciones reflexivas generan respuestas innovadoras
- **Instrucci√≥n al final**: Para textos largos, mueva la instrucci√≥n al final antes del indicador de salida

#### Especificaciones t√©cnicas
- **Transmita el tema claramente**: Especifique qui√©n, qu√©, d√≥nde, cu√°ndo, por qu√©, c√≥mo
- **Directivas expl√≠citas**: "Resuma en una sola frase" vs descripciones vagas
- **Evite formulaciones negativas**: Use "m√°ximo 10 palabras" vs "no m√°s de 10 palabras"
- **Especifique tama√±o de respuesta**: Incluya l√≠mites de longitud espec√≠ficos

#### T√©cnicas avanzadas
**Cadena de pensamientos (CoT)**
Para problemas complejos, agregue "piense paso a paso":

Indicaci√≥n: ¬øQu√© veh√≠culo necesita m√°s pago inicial? (piense paso a paso)
Veh√≠culo A: $40,000 con 30% inicial
Veh√≠culo B: $50,000 con 20% inicial

Respuesta: Veh√≠culo A necesita m√°s pago inicial.
A: $40,000 √ó 30% = $12,000
B: $50,000 √ó 20% = $10,000
Por tanto, A requiere $2,000 m√°s.

**Manejo de incertidumbre**
Defina qu√© hacer si el modelo no sabe: "Si no est√° seguro, responda 'No s√©'"

**Restricciones de responsabilidad**
Para dominios especializados: "No tengo licencia m√©dica. Consulte un profesional"

**Etiquetas XML/HTML**
Use `<text>...</text>` para estructurar indicaciones complejas y `<respuesta>...</respuesta>` para formatear salidas.

### Par√°metros de configuraci√≥n de inferencia

<div align="center">
    <img src="./imagenes/parametros-config.png" width="70%">
</div>

#### Par√°metros principales

**Max new tokens**
- Limita componentes l√©xicos generados
- Controla longitud, no previene alucinaciones

**Estrategias de muestreo**
- **Muestreo codificioso**: Siempre elige palabra m√°s probable (predeterminado)
- **Muestreo aleatorio**: Selecci√≥n ponderada aleatoria, m√°s natural

<div align="center">
    <img src="./imagenes/muestreo-comparacion.png" width="70%">
</div>

**Top-k**
Limita selecci√≥n a los k componentes m√°s probables. Si k=3, elige aleatoriamente entre las 3 opciones principales.

<div align="center">
    <img src="./imagenes/top-k-ejemplo.png" width="70%">
</div>

**Top-p**
Selecciona componentes cuyas probabilidades acumuladas no excedan p. Ejemplo: p=0.32 incluye componentes con probabilidades 0.30, 0.20, 0.10, 0.02.

<div align="center">
    <img src="./imagenes/top-p-ejemplo.png" width="70%">
</div>

**Temperatura**
Controla aleatoriedad modificando distribuci√≥n de probabilidad:
- **Baja (<1)**: M√°s conservador, concentra probabilidades
- **Alta (>1)**: M√°s creativo, distribuye probabilidades uniformemente  
- **1**: Mantiene distribuci√≥n original del modelo

<div align="center">
    <img src="./imagenes/temperatura-comparacion.png" width="70%">
</div>

> ‚ö†Ô∏è **Cuidado**: Temperatura muy baja = repeticiones. Temperatura muy alta = sin sentido.

### Resumen

La ingenier√≠a de indicaciones combina arte y ciencia para optimizar respuestas de modelos generativos. T√©cnicas clave: indicaciones claras, ejemplos consistentes, cadena de pensamientos, y configuraci√≥n apropiada de par√°metros (temperatura, top-k, top-p). Estas t√©cnicas no modifican pesos del modelo - para personalizaci√≥n profunda se requiere entrenamiento espec√≠fico con datos propios.